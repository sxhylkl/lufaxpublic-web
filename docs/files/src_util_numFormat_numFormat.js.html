<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/util/numFormat/numFormat.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/: Animation.html">: Animation</a></li>
            
                <li><a href="../classes/Captcha.html">Captcha</a></li>
            
                <li><a href="../classes/Checkin.html">Checkin</a></li>
            
                <li><a href="../classes/Cookie.html">Cookie</a></li>
            
                <li><a href="../classes/countDown.html">countDown</a></li>
            
                <li><a href="../classes/GoTop.html">GoTop</a></li>
            
                <li><a href="../classes/limitText.html">limitText</a></li>
            
                <li><a href="../classes/loading.html">loading</a></li>
            
                <li><a href="../classes/Log.html">Log</a></li>
            
                <li><a href="../classes/numberstep.html">numberstep</a></li>
            
                <li><a href="../classes/NumFormat.html">NumFormat</a></li>
            
                <li><a href="../classes/NumSeparate.html">NumSeparate</a></li>
            
                <li><a href="../classes/pageCount.html">pageCount</a></li>
            
                <li><a href="../classes/popup.html">popup</a></li>
            
                <li><a href="../classes/Tabset.html">Tabset</a></li>
            
                <li><a href="../classes/templateMerge.html">templateMerge</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/com.html">com</a></li>
            
                <li><a href="../modules/lufax.html">lufax</a></li>
            
                <li><a href="../modules/lufax
author: fangxiao.html">lufax
author: fangxiao</a></li>
            
                <li><a href="../modules/ui.html">ui</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/util/numFormat/numFormat.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * depends: jquery
 * author: huangjunyan
 * date: 2014/8/12
 */
!function (window) {
    /**
     * @class NumFormat
     * @constructor NumFormat
     */

    var NumFormat ={
        percentageFormat: function (num) {

            if (num === 0 || num === &quot;0&quot;) {
                return &quot;0.00%&quot;
            }

            if (!num || isNaN(num)) {
                return &quot;&quot;;
            }

            num = parseFloat(num);
            num = Math.round(num * 10000) / 100 + &quot;&quot;;

            if (num.indexOf(&quot;.&quot;) == -1) {
                num += &quot;.00&quot;;
            } else {
                num += &quot;00&quot;
            }
            var numArr = num.split(&quot;.&quot;);
            var floatNumber = numArr[1].substring(0, 2);

            return numArr[0] + &quot;.&quot; + floatNumber + &quot;%&quot;;

        },
        withoutPercentageFormat: function (num) {

            if (num === 0 || num === &quot;0&quot;) {
                return &quot;0.00%&quot;
            }

            if (!num || isNaN(num)) {
                return &quot;&quot;;
            }

            num = parseFloat(num);
            num = Math.round(num * 10000) / 100 + &quot;&quot;;

            if (num.indexOf(&quot;.&quot;) == -1) {
                num += &quot;.00&quot;;
            } else {
                num += &quot;00&quot;
            }
            var numArr = num.split(&quot;.&quot;);
            var floatNumber = numArr[1].substring(0, 2);

            return numArr[0] + &quot;.&quot; + floatNumber;

        },
        numberFormat: function (nStr) {
            var currency = &quot;￥&quot;;
            var number = this.numberFormatWithoutCurrency(nStr);
            if (number == &#x27;&#x27;) {
                return number;
            }
            return currency + number;
        },
        numberFormatWithoutCurrency: function (nStr) {
            if (nStr === 0 || nStr === &quot;0&quot;) {
                return &quot;0.00&quot;;
            }

            if (!nStr || isNaN(nStr)) {
                return &quot;&quot;;
            }

            nStr += &#x27;&#x27;;
            var x = nStr.split(&#x27;.&#x27;);
            var x1 = x[0];
            var x2 = x.length &gt; 1 ? &#x27;.&#x27; + x[1] : &#x27;.00&#x27;;
            if (x2.length &lt; 3) {
                x2 += &quot;00&quot;;
            }
            x2 = x2.substring(0, 3);
            var rgx = /(\d+)(\d{3})/;
            while (rgx.test(x1)) {
                x1 = x1.replace(rgx, &#x27;$1&#x27; + &#x27;,&#x27; + &#x27;$2&#x27;);
            }
            return x1 + x2;
        },
        intFormat: function (nStr) {
            var currency = &quot;￥&quot;;
            var number = this.intFormatWithoutCurrency(nStr);
            if (number == &#x27;&#x27;) {
                return number;
            }
            return currency + number;
        },
        intFormatWithoutCurrency: function (nStr) {
            if (nStr === 0 || nStr === &quot;0&quot;) {
                return &quot;0&quot;;
            }

            if (!nStr || isNaN(nStr)) {
                return &quot;&quot;;
            }

            nStr += &#x27;&#x27;;
            var x1 = nStr;
            var rgx = /(\d+)(\d{3})/;
            while (rgx.test(x1)) {
                x1 = x1.replace(rgx, &#x27;$1&#x27; + &#x27;,&#x27; + &#x27;$2&#x27;);
            }
            return x1;
        },

        round: function (value) {
            return Math.round(value * 100) / 100;
        },


        convertCurrency: function (currencyDigits, isforbidHint) {
            //max number
            var MAXIMUM_NUMBER = 99999999999.99;
            //Predefine the radix characters and currency symbols for output:
            var CN_ZERO = &quot;零&quot;;
            var CN_ONE = &quot;壹&quot;;
            var CN_TWO = &quot;贰&quot;;
            var CN_THREE = &quot;叁&quot;;
            var CN_FOUR = &quot;肆&quot;;
            var CN_FIVE = &quot;伍&quot;;
            var CN_SIX = &quot;陆&quot;;
            var CN_SEVEN = &quot;柒&quot;;
            var CN_EIGHT = &quot;捌&quot;;
            var CN_NINE = &quot;玖&quot;;
            var CN_TEN = &quot;拾&quot;;
            var CN_HUNDRED = &quot;佰&quot;;
            var CN_THOUSAND = &quot;仟&quot;;
            var CN_TEN_THOUSAND = &quot;万&quot;;
            var CN_HUNDRED_MILLION = &quot;亿&quot;;
            var CN_SYMBOL = &quot;人民币&quot;;
            var CN_DOLLAR = &quot;元&quot;;
            var CN_TEN_CENT = &quot;角&quot;;
            var CN_CENT = &quot;分&quot;;
            var CN_INTEGER = &quot;整&quot;;

            // Variables:
            var integral; // Represent integral part of digit number.
            var decimal; // Represent decimal part of digit number.
            var outputCharacters; // The output result.
            var parts;
            var digits, radices, bigRadices, decimals;
            var zeroCount;
            var i, p, d;
            var quotient, modulus;

            // Validate input string:
            currencyDigits = currencyDigits + &quot;&quot;;

            if (currencyDigits == &quot;&quot;) {
                if (isforbidHint) {
                    return &quot;&quot;;
                }
                return &quot;Empty input!&quot;;
            }
            if (currencyDigits.match(/[^,.\d]/) != null) {
                if (isforbidHint) {
                    return &quot;&quot;;
                }
                return &quot;Invalid characters in the input string!&quot;;
            }
//      if ((currencyDigits).match(/^((\d{1,3}(,\d{3})*(.((\d{3},)*\d{1,3}))?)|(\d+(.\d+)?))$/) == null) {
            if ((currencyDigits).match(/^((\d{1,3}(,\d{3})*(.\d+)?)|(\d+(.\d+)?))$/) == null) {
                if (isforbidHint) {
                    return &quot;&quot;;
                }
                return &quot;Illegal format of digit number!&quot;;
            }

            // Normalize the format of input digits:
            currencyDigits = currencyDigits.replace(/,/g, &quot;&quot;); // Remove comma delimiters.
            currencyDigits = currencyDigits.replace(/^0+/, &quot;&quot;); // Trim zeros at the beginning.
            // Assert the number is not greater than the maximum number.
            if (Number(currencyDigits) &gt; MAXIMUM_NUMBER) {
                if (isforbidHint) {
                    return &quot;&quot;;
                }
                return &quot;Too large a number to convert!&quot;;
            }

            // hack by wr
            currencyDigits = parseFloat(currencyDigits);
            currencyDigits = currencyDigits + &quot;&quot;;

            // Process the coversion from currency digits to characters:
            // Separate integral and decimal parts before processing coversion:
            parts = currencyDigits.split(&quot;.&quot;);
            if (parts.length &gt; 1) {
                integral = parts[0];
                decimal = parts[1];
                // Cut down redundant decimal digits that are after the second.
                decimal = decimal.substr(0, 2);
            } else {
                integral = parts[0];
                decimal = &quot;&quot;;
            }

            // Prepare the characters corresponding to the digits:
            digits = new Array(CN_ZERO, CN_ONE, CN_TWO, CN_THREE, CN_FOUR, CN_FIVE, CN_SIX, CN_SEVEN, CN_EIGHT, CN_NINE);
            radices = new Array(&quot;&quot;, CN_TEN, CN_HUNDRED, CN_THOUSAND);
            bigRadices = new Array(&quot;&quot;, CN_TEN_THOUSAND, CN_HUNDRED_MILLION);
            decimals = new Array(CN_TEN_CENT, CN_CENT);
            // Start processing:
            outputCharacters = &quot;&quot;;
            // Process integral part if it is larger than 0:
            if (Number(integral) &gt; 0) {
                zeroCount = 0;
                for (i = 0; i &lt; integral.length; i++) {
                    p = integral.length - i - 1;
                    d = integral.substr(i, 1);
                    quotient = p / 4;
                    modulus = p % 4;
                    if (d == &quot;0&quot;) {
                        zeroCount++;
                    } else {
                        if (zeroCount &gt; 0) {
                            outputCharacters += digits[0];
                        }
                        zeroCount = 0;
                        outputCharacters += digits[Number(d)] + radices[modulus];
                    }
                    if (modulus == 0 &amp;&amp; zeroCount &lt; 4) {
                        outputCharacters += bigRadices[quotient];
                    }
                }
                outputCharacters += CN_DOLLAR;
            }

            // Process decimal part if there is:
            if (decimal != &quot;&quot;) {
                for (i = 0; i &lt; decimal.length; i++) {
                    d = decimal.substr(i, 1);
                    if (d != &quot;0&quot;) {
                        outputCharacters += digits[Number(d)] + decimals[i];
                    }
                }
            }

            // Confirm and return the final output string:
            if (outputCharacters == &quot;&quot;) {
                outputCharacters = CN_ZERO + CN_DOLLAR;
            }
            if (decimal == &quot;&quot;) {
                outputCharacters += CN_INTEGER;
            }
            return outputCharacters;
        },

        secondsOfTrading: function (secondsOfTrading) {
            secondsOfTrading = Number(secondsOfTrading);
            var remainTime,
                minutes,
                hours,
                seconds;

            if (secondsOfTrading &lt;= 60) {
                remainTime = secondsOfTrading + &#x27;秒&#x27;;

            } else if (60 &lt; secondsOfTrading &amp;&amp; secondsOfTrading &lt; 3600) {
                seconds = secondsOfTrading % 60;
                minutes = Math.floor(secondsOfTrading / 60) % 60;
                remainTime = minutes + &#x27;分&#x27; + seconds + &#x27;秒&#x27;;

            } else if (3600 &lt;= secondsOfTrading &amp;&amp; secondsOfTrading &lt; 86400) {
                seconds = secondsOfTrading % 60;
                minutes = Math.floor(secondsOfTrading / 60) % 60;
                hours = Math.floor(secondsOfTrading / 60 / 60) % 24;
                remainTime = hours + &#x27;小时&#x27; + minutes + &#x27;分&#x27; + seconds + &#x27;秒&#x27;;

            } else {
                remainTime = &#x27;&#x27;;

            }
            return remainTime;
        },

        numberFormatTenThousand: function (nStr) {
            if (nStr === 0 || nStr === &quot;0&quot;) {
                return &quot;0万&quot;;
            }

            if (!nStr || isNaN(nStr)) {
                return &quot;&quot;;
            }


            nStr = nStr / 10000;
            nStr += &#x27;&#x27;;
            var x = nStr.split(&#x27;.&#x27;)[0];
            var y = nStr.split(&#x27;.&#x27;)[1];
            if (y) {
                y = y.substring(0, 2);
                return x + &#x27;.&#x27; + y + &#x27;万&#x27;;
            } else {
                return x + &#x27;万&#x27;;
            }

        },

        percentageFormatWithoutZero: function (num) {
            if (num === 0 || num === &quot;0&quot;) {
                return &quot;0%&quot;
            }
            if (num &gt; 1 || num &gt; &quot;1&quot;) {
                return &quot;100%&quot;
            }
            if (!num || isNaN(num)) {
                return &quot;&quot;;
            }
            num = parseFloat(num);
            num = (num * 10000) / 100 + &quot;&quot;;
            if (num.indexOf(&quot;.&quot;) === -1) {
                return  num + &quot;%&quot;;
            } else {
                var numArr = num.split(&quot;.&quot;), secFloatNumber = numArr[1].substring(1, 2), firstFloatNumber = numArr[1].substring(0, 1), floatNumber = numArr[1].substring(0, 2);
                if (secFloatNumber === &quot;0&quot;) {
                    return numArr[0] + &quot;.&quot; + firstFloatNumber + &quot;%&quot;;
                } else {
                    return numArr[0] + &quot;.&quot; + floatNumber + &quot;%&quot;;

                }
            }
        },

        progressFormat: function (num) {
            if (num === 0 || num === &quot;0&quot;) {
                return &quot;0%&quot;
            }
            if (num &gt; 1 || num &gt; &quot;1&quot;) {
                return &quot;100%&quot;
            }
            if (!num || isNaN(num)) {
                return &quot;&quot;;
            }
            num = parseFloat(num);
            num = (num * 10000) / 100 + &quot;&quot;;
            var numArr = num.split(&quot;.&quot;);
            return numArr[0] + &quot;%&quot;;

        }
    }


    lufax.util.NumFormat = NumFormat;
    lufax.NumFormat = lufax.util.NumFormat;
}(this);

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
