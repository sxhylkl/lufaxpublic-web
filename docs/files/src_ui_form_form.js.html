<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/ui/form/form.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/: Animation.html">: Animation</a></li>
            
                <li><a href="../classes/Captcha.html">Captcha</a></li>
            
                <li><a href="../classes/Checkin.html">Checkin</a></li>
            
                <li><a href="../classes/Cookie.html">Cookie</a></li>
            
                <li><a href="../classes/countDown.html">countDown</a></li>
            
                <li><a href="../classes/GoTop.html">GoTop</a></li>
            
                <li><a href="../classes/limitText.html">limitText</a></li>
            
                <li><a href="../classes/loading.html">loading</a></li>
            
                <li><a href="../classes/Log.html">Log</a></li>
            
                <li><a href="../classes/numberstep.html">numberstep</a></li>
            
                <li><a href="../classes/NumFormat.html">NumFormat</a></li>
            
                <li><a href="../classes/NumSeparate.html">NumSeparate</a></li>
            
                <li><a href="../classes/pageCount.html">pageCount</a></li>
            
                <li><a href="../classes/popup.html">popup</a></li>
            
                <li><a href="../classes/Tabset.html">Tabset</a></li>
            
                <li><a href="../classes/templateMerge.html">templateMerge</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/com.html">com</a></li>
            
                <li><a href="../modules/lufax.html">lufax</a></li>
            
                <li><a href="../modules/lufax
author: fangxiao.html">lufax
author: fangxiao</a></li>
            
                <li><a href="../modules/ui.html">ui</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/ui/form/form.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * name: form component
 * depends: jquery
 * require: form.css , form_icon_ullh.png form_input.png input_icon.png
 * author: wangdongqiang
 * date: 2014/08/21
 */

/**
 *功能：form 组件化
 *@method form
 */
!function(){
    var form = {
        init:function(){
            var me = this;

            me.init_checkbox(&quot;.form-checkbox&quot;);
            me.init_radio(&quot;.form-radio&quot;);


            //    old style
            $(&quot;.form_text&quot;).not(&quot;.pwd,.cal&quot;).each(function () {
                var ft = $(this);
                $(this).find(&quot;input&quot;).width(ft.width() - ft.find(&quot;.icon&quot;).width() - ft.find(&quot;.last&quot;).width() - 10);
            });

            $(&quot;.form_textarea&quot;).each(function () {
                $(this).find(&quot;textarea&quot;).width($(this).width() - 6).height($(this).height() - 6);
            }).find(&quot;textarea&quot;).focus(function () {
                $(this).parents(&quot;.form_textarea&quot;).addClass(&quot;form_textarea_focus&quot;);
            }).blur(function () {
                $(this).parents(&quot;.form_textarea&quot;).removeClass(&quot;form_textarea_focus&quot;);
            });
            $(&quot;.form_text&quot;).find(&quot;:text,:password&quot;).focus(function () {
                $(this).parents(&quot;.form_text&quot;).addClass(&quot;text_focus&quot;);
            }).blur(function () {
                $(this).parents(&quot;.form_text&quot;).removeClass(&quot;text_focus&quot;);
            });
            $(&quot;.prompting .leftarrow,.prompting .greyarrow&quot;).each(function () {
                $(this).find(&quot;.left_border&quot;).height($(this).height() - $(this).find(&quot;.left_top_corner&quot;).height() - $(this).find(&quot;.left_bottom_corner&quot;).height()).children(&quot;span&quot;).height($(this).find(&quot;.left_border&quot;).height());
                $(this).find(&quot;.right_border&quot;).height($(this).height() - $(this).find(&quot;.right_top_corner&quot;).height() - $(this).find(&quot;.right_bottom_corner&quot;).height())
                    .children(&quot;span&quot;).height($(this).find(&quot;.right_border&quot;).height());
                if ($(this).hasClass(&quot;leftarrow&quot;)) {
                    $(this).find(&quot;.prompting_main&quot;).height($(this).height() - 2)
                }
                else {
                    $(this).find(&quot;.prompting_main&quot;).height($(this).height())
                }
            });

            $(&quot;.prompting .leftarrowgold&quot;).each(function () {
                $(this).find(&quot;.left_border&quot;).height($(this).height() - $(this).find(&quot;.left_top_corner&quot;).height() - $(this).find(&quot;.left_bottom_corner&quot;).height()).children(&quot;span&quot;).height($(this).find(&quot;.left_border&quot;).height());
                $(this).find(&quot;.right_border&quot;).height($(this).height() - $(this).find(&quot;.right_top_corner&quot;).height() - $(this).find(&quot;.right_bottom_corner&quot;).height())
                    .children(&quot;span&quot;).height($(this).find(&quot;.right_border&quot;).height());
                if ($(this).hasClass(&quot;leftarrowgold&quot;)) {
                    $(this).find(&quot;.prompting_main&quot;).height($(this).height() - 2)
                }
                else {
                    $(this).find(&quot;.prompting_main&quot;).height($(this).height())
                }
            });

            $(&quot;.prompting .toprightarrow,.prompting .topleftarrow&quot;).each(function () {
                $(this).find(&quot;.top_center&quot;).width($(this).width() - $(this).find(&quot;.top_left_corner&quot;).width() - $(this).find(&quot;.top_right_corner&quot;).width());
                $(this).find(&quot;.bottom_center&quot;).width($(this).width() - $(this).find(&quot;.bottom_left_corner&quot;).width() - $(this).find(&quot;.bottom_right_corner&quot;).width());
            });

            $(&quot;.form_search&quot;).find(&quot;:text&quot;).focus(function () {
                $(this).parents(&quot;.form_search&quot;).addClass(&quot;focus&quot;);
            }).blur(function () {
                $(this).parents(&quot;.form_search&quot;).removeClass(&quot;focus&quot;);
            });


            var zIndex = 1;
            $(&#x27;.form_select&gt;div,.form_select&gt;span&#x27;).live(&#x27;click&#x27;, function () {
                var me = $(this);
                me.next(&quot;ul&quot;).toggle();
                $(&#x27;.form_select&#x27;).css({&#x27;z-index&#x27;: 0});
                me.parent(&quot;.form_select&quot;).css({&#x27;z-index&#x27;: 1});

                me.parent().addClass(&quot;focus-form&quot;);
                /*初始select同步*/
                me.next(&quot;ul&quot;).find(&quot;li&quot;).each(function () {
                    if (me.find(&quot;a&quot;).attr(&quot;data-value&quot;) == me.find(&quot;a&quot;).attr(&quot;data-value&quot;)) {
                        me.find(&quot;a&quot;).addClass(&quot;select&quot;);
                    }
                });
            });
            $(&quot;.form_select&gt;ul&gt;li&quot;).live(&#x27;click&#x27;, function () {
                $(this).parent().next().children(&quot;option&quot;).eq($(this).parent().children(&quot;li&quot;).index($(this))).prop(&quot;selected&quot;, true);
                var $selectedDisplay = $(this).parent().prev().find(&quot;a&quot;);
                $selectedDisplay.text($(this).text());
                $selectedDisplay.attr(&#x27;data-value&#x27;, $(this).find(&#x27;a&#x27;).attr(&#x27;data-value&#x27;));

                /*select状态切换*/
                $(this).each(function () {
                    $(this).parent().find(&quot;a&quot;).removeClass(&quot;select&quot;);
                })
                $(this).find(&quot;a&quot;).addClass(&quot;select&quot;);
                $(this).parent(&quot;ul&quot;).hide();
            });
            $(document).click(function (e) {
                var es = $(e.target).parents(&quot;.form_select&quot;);
                $(&quot;.form_select&quot;).not(es).removeClass(&#x27;focus-form&#x27;).find(&quot;ul&quot;).hide();
            });

            $(&#x27;.inputs , .textareas, .input-wrap .input , .input-wrap .textarea&#x27;).live({
                focus: function () {
                    $(this).parent().addClass(&#x27;focus-form&#x27;);
                },
                blur: function () {
                    $(this).parent().removeClass(&#x27;focus-form&#x27;);
                }
            });

            me.selectShow();
        },

        init_checkbox : function (el) {
            var me = this;
            $(el).each(function () {
                me.checkboxHandler(this, &quot;init&quot;);
            });
        },
        init_radio : function (el) {
            var me = this;
            $(el).each(function () {
                me.radioHandler(this, &quot;init&quot;);
            });
        },

        checkboxHandler : function (el, init) {
            var args = {
                check_el: $(el).find(&#x27;:checkbox&#x27;),
                init: init || &quot;&quot;
            }

            if (args.init.length &gt; 0) {
                if(args.check_el.attr(&quot;checked&quot;) === &quot;checked&quot; || args.check_el.attr(&quot;disabled&quot;) === &quot;disabled&quot;){
                    return;
                }else{
                    args.check_el.prop(&quot;checked&quot;, false);
                    args.check_el.attr(&quot;checked&quot;, false);
                }
            }
        },

        radioHandler : function (el, init) {
            var args = {
                check_el: $(el).find(&#x27;:radio&#x27;),
                init: init || &quot;&quot;
            }
            if (args.init.length &gt; 0) {
                if(args.check_el.attr(&quot;checked&quot;) === &quot;checked&quot; || args.check_el.attr(&quot;disabled&quot;) === &quot;disabled&quot;){
                    return false;
                }else{
                    args.check_el.prop(&quot;checked&quot;, false);
                    args.check_el.attr(&quot;checked&quot;, false);
                }
            }
        },

        selectShow : function () {
            $(&quot;.form_select&quot;).each(function () {
                var selected = &quot;&quot;;
                if ($(this).hasClass(&quot;show_last&quot;)) {
                    selected = ($(this).find(&quot;option:[isDefault]&quot;).length == 0) ? $(this).find(&quot;option:last&quot;) : $(this).find(&quot;option:[isDefault]&quot;);
                } else {
                    selected = ($(this).find(&quot;option:selected&quot;).length &gt; 0) ? $(this).find(&quot;option:selected&quot;) : $(this).find(&quot;option:first&quot;);
                }

                if ($(this).find(&#x27;a&#x27;).length &gt; 0) {
                    if ($(this).find(&#x27;a&#x27;).text() == &#x27;&#x27;) {
                        $(this).find(&#x27;a&#x27;).text(selected.text());
                        for (i = 0; i &lt; $(this).find(&quot;option&quot;).length; i++) {
                            $(this).find(&quot;ul&quot;).append(&quot;&lt;li&gt;&lt;a href=&#x27;javascript:void(0)&#x27; title=&#x27;&quot; + $(this).find(&#x27;option&#x27;).eq(i).text() + &quot;&#x27;&gt;&quot; + $(this).find(&quot;option&quot;).eq(i).text() + &quot;&lt;/a&gt;&lt;/li&gt;&quot;);
                        }
                    }
                } else {
                    if ($(this).hasClass(&quot;ullh&quot;)) {
                        $(this).prepend(&quot;&lt;div&gt;&lt;a class=&#x27;selected-display&#x27; data-value=&quot; + selected.val() + &quot;&gt;&quot; + selected.text() + &quot;&lt;/a&gt;&lt;/div&gt;&lt;ul&gt;&lt;/ul&gt;&quot;);
                    } else {
                        $(this).prepend(&quot;&lt;div&gt;&lt;span&gt;&lt;a class=&#x27;selected-display&#x27; data-value=&quot; + selected.val() + &quot;&gt;&quot; + selected.text() + &quot;&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;ul&gt;&lt;/ul&gt;&quot;);
                    }
                    for (i = 0; i &lt; $(this).find(&quot;option&quot;).length; i++) {
                        var me_val = $(this).find(&#x27;option&#x27;).eq(i).val(),
                            me_title = $(this).find(&#x27;option&#x27;).eq(i).text();
                        $(this).find(&quot;ul&quot;).append(&quot;&lt;li&gt;&lt;a href=&#x27;javascript:void(0)&#x27; title=&quot; + me_title + &quot; data-value=&quot; + me_val + &quot;&gt;&quot; + me_title + &quot;&lt;/a&gt;&lt;/li&gt;&quot;);
                    }
                }


                if ($(this).hasClass(&quot;ullh&quot;)) {
                    $(this).find(&quot;ul&quot;).css({left: 3, width: $(this).children(&quot;div&quot;).outerWidth() - 8});
                } else {
                    $(this).find(&quot;ul&quot;).width($(this).width() - 2);
                }
            })
        }
    }

    lufax.ui.form = form;
    lufax.form = lufax.ui.form;
}(this);

$(function () {
    lufax.form.init();
});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
