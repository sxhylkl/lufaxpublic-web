function userKeepSession(){var a=new Image;a.src=LufaxSite.Envs.evn.user+"/keepSession.gif?timestamp="+(new Date).getTime()}function checkboxAndradioShow(a){$(a).each(function(){$(this).find("a").length>0||($(this).prepend("<a></a>"),checkboxHandler(this,"init"),radioHandler(this,"init"))})}function checkboxHandler(a,b){var c={check_el:$(a).find("a"),init:b||""};return $(a).hasClass("disabled")?void $(this).unbind("click"):void(c.init.length>0||c.check_el.hasClass("checked")?c.check_el.removeClass("checked").next(":checkbox").prop("checked",!1):c.check_el.addClass("checked").next(":checkbox").prop("checked",!0))}function radioHandler(a,b){var c={check_el:$(a).find("a"),init:b||""};return $(a).hasClass("disabled")?void $(this).unbind("click"):void(c.init.length>0?c.check_el.removeClass("checked").next(":radio").prop("checked",!1):c.check_el.addClass("checked").next(":radio").prop("checked",!0).parent().siblings(".form_radio").find("a").removeClass("checked").next(":radio").prop("checked",!1))}function selectShow(){$(".form_select").each(function(){var a="";if(a=$(this).find($(this).hasClass("show_last")?0==$(this).find("option:[isDefault]").length?"option:last":"option:[isDefault]":$(this).find("option:selected").length>0?"option:selected":"option:first"),$(this).find("a").length>0){if(""==$(this).find("a").text())for($(this).find("a").text(a.text()),i=0;i<$(this).find("option").length;i++)$(this).find("ul").append("<li><a href='javascript:void(0)' title='"+$(this).find("option").eq(i).text()+"'>"+$(this).find("option").eq(i).text()+"</a></li>")}else for($(this).prepend($(this).hasClass("ullh")?"<div><a class='selected-display' data-value="+a.val()+">"+a.text()+"</a></div><ul></ul>":"<div><span><a class='selected-display' data-value="+a.val()+">"+a.text()+"</a></span></div><ul></ul>"),i=0;i<$(this).find("option").length;i++){var b=$(this).find("option").eq(i).val(),c=$(this).find("option").eq(i).text();$(this).find("ul").append("<li><a href='javascript:void(0)' title="+c+" data-value="+b+">"+c+"</a></li>")}$(this).hasClass("ullh")?$(this).find("ul").css({left:3,width:$(this).children("div").outerWidth()-8}):$(this).find("ul").width($(this).width()-2)})}function disabled(){$(".form_checkbox").each(function(){$(this).hasClass("disabled")&&$(this).find("input").attr("disabled","disabld")})}function checked(a){if(checked.options=$.extend({},checked.options,a||{}),checked.options.isRadio===!0)var b=$(".form_radio");else var b=$(".form_checkbox");b.each(function(){$(this).hasClass("checked")&&$(this).find("a").addClass("checked").next("input").prop("checked",!0)})}function radio_disabled(){$(".form_radio").each(function(){$(this).hasClass("disabled")&&$(this).find("a").removeClass().next(":radio").attr({disabled:"disabled"}).prop("checked",!1)})}function Validation(){}function ValidationExecutor(a){this.messageList=$.extend({},MESSAGES,a),this.validationList=[],this.errors=[],this.config={targetElement:null}}!function(a){function b(b,d){var f=b==window,k=d&&void 0!==d.message?d.message:void 0;d=a.extend({},a.blockUI.defaults,d||{}),d.overlayCSS=a.extend({},a.blockUI.defaults.overlayCSS,d.overlayCSS||{});var p=a.extend({},a.blockUI.defaults.css,d.css||{}),q=a.extend({},a.blockUI.defaults.themedCSS,d.themedCSS||{});if(k=void 0===k?d.message:k,f&&n&&c(window,{fadeOut:0}),k&&"string"!=typeof k&&(k.parentNode||k.jquery)){var r=k.jquery?k[0]:k,s={};a(b).data("blockUI.history",s),s.el=r,s.parent=r.parentNode,s.display=r.style.display,s.position=r.style.position,s.parent&&s.parent.removeChild(r)}var t,u,v=d.baseZ,w=a(a.browser.msie||d.forceIframe?'<iframe class="blockUI" style="z-index:'+v++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+d.iframeSrc+'"></iframe>':'<div class="blockUI" style="display:none"></div>'),x=a('<div class="blockUI blockOverlay" style="z-index:'+v++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');u=d.theme&&f?'<div class="blockUI blockMsg blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+v+';display:none;position:fixed"><div class="ui-widget-header ui-dialog-titlebar blockTitle">'+(d.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>':d.theme?'<div class="blockUI blockMsg blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+v+';display:none;position:absolute"><div class="ui-widget-header ui-dialog-titlebar blockTitle">'+(d.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>':f?'<div class="blockUI blockMsg blockPage" style="z-index:'+v+';display:none;position:fixed"></div>':'<div class="blockUI blockMsg blockElement" style="z-index:'+v+';display:none;position:absolute"></div>',t=a(u),k&&(d.theme?(t.css(q),t.addClass("ui-widget-content")):t.css(p)),d.applyPlatformOpacityRules&&a.browser.mozilla&&/Linux/.test(navigator.platform)||x.css(d.overlayCSS),x.css("position",f?"fixed":"absolute"),(a.browser.msie||d.forceIframe)&&w.css("opacity",0);var y=[w,x,t],z=a(f?"body":b);a.each(y,function(){this.appendTo(z)}),d.theme&&d.draggable&&a.fn.draggable&&t.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var A=l&&(!a.boxModel||a("object,embed",f?null:b).length>0);if(m||A){if(f&&d.allowBodyStretch&&a.boxModel&&a("html,body").css("height","100%"),(m||!a.boxModel)&&!f)var B=i(b,"borderTopWidth"),C=i(b,"borderLeftWidth"),D=B?"(0 - "+B+")":0,E=C?"(0 - "+C+")":0;a.each([w,x,t],function(a,b){var c=b[0].style;if(c.position="absolute",2>a)f?c.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+d.quirksmodeOffsetHack+') + "px"'):c.setExpression("height",'this.parentNode.offsetHeight + "px"'),f?c.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):c.setExpression("width",'this.parentNode.offsetWidth + "px"'),E&&c.setExpression("left",E),D&&c.setExpression("top",D);else if(d.centerY)f&&c.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),c.marginTop=0;else if(!d.centerY&&f){var e=d.css&&d.css.top?parseInt(d.css.top):0,g="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+e+') + "px"';c.setExpression("top",g)}})}if(k&&(d.theme?t.find(".ui-widget-content").append(k):t.append(k),(k.jquery||k.nodeType)&&a(k).show()),(a.browser.msie||d.forceIframe)&&d.showOverlay&&w.show(),d.fadeIn){var F=d.onBlock?d.onBlock:j,G=d.showOverlay&&!k?F:j,H=k?F:j;d.showOverlay&&x._fadeIn(d.fadeIn,G),k&&t._fadeIn(d.fadeIn,H)}else d.showOverlay&&x.show(),k&&t.show(),d.onBlock&&d.onBlock();if(e(1,b,d),f?(n=t[0],o=a(":input:enabled:visible",n),d.focusInput&&setTimeout(g,20)):h(t[0],d.centerX,d.centerY),d.timeout){var I=setTimeout(function(){f?a.unblockUI(d):a(b).unblock(d)},d.timeout);a(b).data("blockUI.timeout",I)}}function c(b,c){var f=b==window,g=a(b),h=g.data("blockUI.history"),i=g.data("blockUI.timeout");i&&(clearTimeout(i),g.removeData("blockUI.timeout")),c=a.extend({},a.blockUI.defaults,c||{}),e(0,b,c);var j;j=f?a("body").children().filter(".blockUI").add("body > .blockUI"):a(".blockUI",b),f&&(n=o=null),c.fadeOut?(j.fadeOut(c.fadeOut),setTimeout(function(){d(j,h,c,b)},c.fadeOut)):d(j,h,c,b)}function d(b,c,d,e){b.each(function(){this.parentNode&&this.parentNode.removeChild(this)}),c&&c.el&&(c.el.style.display=c.display,c.el.style.position=c.position,c.parent&&c.parent.appendChild(c.el),a(e).removeData("blockUI.history")),"function"==typeof d.onUnblock&&d.onUnblock(e,d)}function e(b,c,d){var e=c==window,g=a(c);if((b||(!e||n)&&(e||g.data("blockUI.isBlocked")))&&(e||g.data("blockUI.isBlocked",b),d.bindEvents&&(!b||d.showOverlay))){var h="mousedown mouseup keydown keypress";b?a(document).bind(h,d,f):a(document).unbind(h,f)}}function f(b){if(b.keyCode&&9==b.keyCode&&n&&b.data.constrainTabKey){var c=o,d=!b.shiftKey&&b.target==c[c.length-1],e=b.shiftKey&&b.target==c[0];if(d||e)return setTimeout(function(){g(e)},10),!1}return a(b.target).parents("div.blockMsg").length>0?!0:0==a(b.target).parents().children().filter("div.blockUI").length}function g(a){if(o){var b=o[a===!0?o.length-1:0];b&&b.focus()}}function h(a,b,c){var d=a.parentNode,e=a.style,f=(d.offsetWidth-a.offsetWidth)/2-i(d,"borderLeftWidth"),g=(d.offsetHeight-a.offsetHeight)/2-i(d,"borderTopWidth");b&&(e.left=f>0?f+"px":"0"),c&&(e.top=g>0?g+"px":"0")}function i(b,c){return parseInt(a.css(b,c))||0}if(/1\.(0|1|2)\.(0|1|2)/.test(a.fn.jquery)||/^1.1/.test(a.fn.jquery))return void alert("blockUI requires jQuery v1.2.3 or later!  You are using v"+a.fn.jquery);a.fn._fadeIn=a.fn.fadeIn;var j=function(){},k=document.documentMode||0,l=a.browser.msie&&(a.browser.version<8&&!k||8>k),m=a.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!k;a.blockUI=function(a){b(window,a)},a.unblockUI=function(a){c(window,a)},a.growlUI=function(b,c,d,e){var f=a('<div class="growlUI"></div>');b&&f.append("<h1>"+b+"</h1>"),c&&f.append("<h2>"+c+"</h2>"),void 0==d&&(d=3e3),a.blockUI({message:f,fadeIn:700,fadeOut:1e3,centerY:!1,timeout:d,showOverlay:!1,onUnblock:e,css:a.blockUI.defaults.growlCSS})},a.fn.block=function(c){return this.unblock({fadeOut:0}).each(function(){"static"==a.css(this,"position")&&(this.style.position="relative"),a.browser.msie&&(this.style.zoom=1),b(this,c)})},a.fn.unblock=function(a){return this.each(function(){c(this,a)})},a.blockUI.version=2.33,a.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,top:"40%",left:"35%",textAlign:"left",color:"#000",border:"none",backgroundColor:"#fff",cursor:"auto"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#666",opacity:.7,cursor:"auto"},growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.7,cursor:"default",color:"#fff",backgroundColor:"#666","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,applyPlatformOpacityRules:!1,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4};var n=null,o=[]}(jQuery);var INIT_TIME=(new Date).getTime(),TIME_LIMIT=15e3;$("head").ajaxSuccess(function(){var a=(new Date).getTime();a-INIT_TIME>TIME_LIMIT&&(userKeepSession(),INIT_TIME=a)}),$(function(){var a='<div class="header clearfix"><div class="logo"><a href="'+LufaxSite.Envs.evn.site+'"><img src="'+("https:"==location.protocol?LufaxSite.Envs.evn.statics:LufaxSite.Envs.evn["static"])+'/config/images/p2p_index/logo_festival.png" alt="陆金所"></a></div><div class="headline"></div><ul class="headNav clearfix"><li><a href="'+LufaxSite.Envs.evn.site+'" target="_blank">陆金所首页</a></li><li><a href="'+LufaxSite.Envs.evn.site+'/help/" target="_blank">帮助中心</a></li><li><a href="'+LufaxSite.Envs.evn.site+'/help/help_service_feedback.html" target="_blank">意见反馈</a></li></ul></div>',b='<div class="footer clearfix"><p class="phoneNum">全国服务热线<span class="num">4008&nbsp;6666&nbsp;18</span></p><p class="copyright">版权所有 © 上海陆家嘴国际金融资产交易市场股份有限公司未经许可不得复制、转载或摘编，违者必究!<br/>Copyright Shanghai Lujiazui International Financial Asset Exchange Co.,LTD. ALL Rights Reserved<br/>沪 ICP 证 B2-20120023号&emsp;&emsp;&emsp;沪 ICP 备 12032241 号-2</p></div>';$(".simple-head-wrap").append(a),$(".simple-foot-wrap").append(b);var c=$("#current-page").val(),d=$("#current-page").attr("data-page-name"),e=$(".headline");switch(c){case"login":e.html('<span class="head-divide">|</span><span class="page-name">会员登录</span>');break;case"register":e.html('<span class="head-divide">|</span><span class="page-name">注册会员</span>');break;default:void 0!=d&&e.html('<span class="head-divide">|</span><span class="page-name">'+d+"</span>")}userKeepSession()}),checked.options={isRadio:!1},$(function(){$(".form_text").not(".pwd,.cal").each(function(){var a=$(this);$(this).find("input").width(a.width()-a.find(".icon").width()-a.find(".last").width()-10)}),$(".form_textarea").each(function(){$(this).find("textarea").width($(this).width()-6).height($(this).height()-6)}).find("textarea").focus(function(){$(this).parents(".form_textarea").addClass("form_textarea_focus")}).blur(function(){$(this).parents(".form_textarea").removeClass("form_textarea_focus")}),$(".form_text").find(":text,:password").focus(function(){$(this).parents(".form_text").addClass("text_focus")}).blur(function(){$(this).parents(".form_text").removeClass("text_focus")}),$(".prompting .leftarrow,.prompting .greyarrow").each(function(){$(this).find(".left_border").height($(this).height()-$(this).find(".left_top_corner").height()-$(this).find(".left_bottom_corner").height()).children("span").height($(this).find(".left_border").height()),$(this).find(".right_border").height($(this).height()-$(this).find(".right_top_corner").height()-$(this).find(".right_bottom_corner").height()).children("span").height($(this).find(".right_border").height()),$(this).find(".prompting_main").height($(this).hasClass("leftarrow")?$(this).height()-2:$(this).height())}),$(".prompting .leftarrowgold").each(function(){$(this).find(".left_border").height($(this).height()-$(this).find(".left_top_corner").height()-$(this).find(".left_bottom_corner").height()).children("span").height($(this).find(".left_border").height()),$(this).find(".right_border").height($(this).height()-$(this).find(".right_top_corner").height()-$(this).find(".right_bottom_corner").height()).children("span").height($(this).find(".right_border").height()),$(this).find(".prompting_main").height($(this).hasClass("leftarrowgold")?$(this).height()-2:$(this).height())}),$(".prompting .toprightarrow,.prompting .topleftarrow").each(function(){$(this).find(".top_center").width($(this).width()-$(this).find(".top_left_corner").width()-$(this).find(".top_right_corner").width()),$(this).find(".bottom_center").width($(this).width()-$(this).find(".bottom_left_corner").width()-$(this).find(".bottom_right_corner").width())}),$(".form_search").find(":text").focus(function(){$(this).parents(".form_search").addClass("focus")}).blur(function(){$(this).parents(".form_search").removeClass("focus")}),$(".form_checkbox").live("click",function(){checkboxHandler(this)}),$(".form_radio").live("click",function(){radioHandler(this)});$(".form_select>div,.form_select>span").live("click",function(){var a=$(this);a.next("ul").toggle(),$(".form_select").css({"z-index":0}),a.parent(".form_select").css({"z-index":1}),a.parent().addClass("focus-form"),a.next("ul").find("li").each(function(){a.find("a").attr("data-value")==a.find("a").attr("data-value")&&a.find("a").addClass("select")})}),$(".form_select>ul>li").live("click",function(){$(this).parent().next().children("option").eq($(this).parent().children("li").index($(this))).prop("selected",!0);var a=$(this).parent().prev().find("a");a.text($(this).text()),a.attr("data-value",$(this).find("a").attr("data-value")),$(this).each(function(){$(this).parent().find("a").removeClass("select")}),$(this).find("a").addClass("select"),$(this).parent("ul").hide()}),$(document).click(function(a){var b=$(a.target).parents(".form_select");$(".form_select").not(b).removeClass("focus-form").find("ul").hide()}),$(".inputs , .textareas, .input-wrap .input , .input-wrap .textarea").live({focus:function(){$(this).parent().addClass("focus-form")},blur:function(){$(this).parent().removeClass("focus-form")}}),selectShow(),checkboxAndradioShow(".form_checkbox"),checkboxAndradioShow(".form_radio"),checked(),checked({isRadio:!0}),disabled(),radio_disabled()}),Validation.prototype.isEmpty=function(a){return 0===a?!1:!a||0==a.length},Validation.prototype.isRate=function(a){return null==a||""==a||Number(a)>0&&/^\d+(\.\d{1,2})?$/.test(a)},Validation.prototype.isDigit=function(a){return/^[0-9]*$/.test(a)};var validation=new Validation,MESSAGES={"num.required":"必须为数字"};ValidationExecutor.prototype.bindValidators=function(a){var b=this;this.validationList.push({dom:a.dom,validators:a.validators,targetDom:a.tagDom,validateAll:function(){var a=this,c=!0,d=function(a){return b.messageList[a.errorCode]};return $.each(a.validators,function(e,f){return f.run()?void 0:(b.errors.push({dom:a.dom,tagDom:a.targetDom,message:d(f)}),c=!1)}),c}})},ValidationExecutor.prototype.validate=function(){this.clearErrors();var a=this,b=!0;return $.each(a.validationList,function(a,c){c.validateAll()||(b=!1)}),b},ValidationExecutor.prototype.showErrors=function(a){var b=this;if($.extend(b.config,a),b.config.targetElement){var c=b.config.targetElement;if(c.html(""),this.errors.length<=0)return;var d="<ul>";$.each(b.errors,function(a,b){d+="<li>"+b.message+"</li>"}),d+="</ul>",c.html(d),c.show()}else $.each(b.errors,function(a,b){function c(){d.hide()}var d=b.tagDom.siblings(".previousTipMsg");c(),b.tagDom.html('<i class="icon minusCircleIcon"></i>'),b.tagDom.append('<span class="content">'+b.message+"</span>"),b.tagDom.show()})},ValidationExecutor.prototype.getErrors=function(){return this.errors},ValidationExecutor.prototype.clearErrors=function(){var a=this;a.config.targetElement?(a.config.targetElement.html('<i class="icon minusCircleIcon"></i>'),a.config.targetElement.hide()):$.each(a.errors,function(a,b){b.tagDom.html('<i class="icon minusCircleIcon"></i>'),b.tagDom.hide()}),this.errors=[]};var MandatoryValidator=function(a,b){this.element=a,this.id=b,this.errorCode=this.id+".required"};MandatoryValidator.prototype.run=function(){var a=this,b=$(a.element).val();return!validation.isEmpty(b)};var isNumValidator=function(a){this.errorCode="num.required",this.element=a};isNumValidator.prototype.run=function(){var a=this,b=$(a.element).val();return validation.isDigit(b)},function(a){a.fn.otpModule=function(b){return this.each(function(){var c={otpType:"1",dynamicType:"1",otpUserMobile:null,otpOfficialCall:null,otpVoiceWaitTime:null,otpCountDownSeconds:null,otpRequestMethod:"GET",otpRequestUrl:null,otpVoiceRequestUrl:null,otpRequestParams:{},otpVoiceRequestParams:{},otpTrigger:!1,otpTriggerCountDown:!1,otpScene:null,otpInputName:"otp",otpMobileType:null,otpRequestCallback:function(){return!1},otpInputTabIndex:null,otpGetRequestParams:function(){return{}},otpGetMobileNo:function(){return k.otpUserMobile},otpFocus:null,otpClick:function(){return!0},otpBlur:null,otpDisablePopupError:!1},d='<div class="control-group otp-group"><label id="otp-label" class="control-label"></label><div class="controls"><span class="input-wrap icon-wrap validate-input"><i class="input-icon validate">&nbsp;</i><input type="text" class="inputs phoneValideNum otp-input"></span>&nbsp;&nbsp;<a href="javascript:void(0);" class="btns btn-info" id="obtainBtn"></a><span class="otp-countdown hidden"></span><span class="errorPanel"><b class="arrow left"> </b><span class="errorContent"></span></span><div class="otp-error-for-popup hidden"></div><div class="otp-info hidden"></div></div></div>';a(this).append(d);var e=a(this).find("#obtainBtn"),f=a(this).find(".otp-info"),g=a(this).find(".otp-countdown"),h=a(this).find(".control-label"),i=(a(this).find(".otp-error-for-popup"),a("body"),a(this).find(".otp-input")),j=a(this).find("#otp-label"),k=a.extend(c,b);"2"==k.otpType?(h.text("手机令牌码："),e.hide()):(h.text("手机动态码："),"1"==k.dynamicType||"2"==k.dynamicType?(e.text("短信获取"),g.html('<span id="sec"></span>秒后重发短信')):"3"==k.dynamicType?(e.text("语音获取"),g.html('<span id="sec"></span>秒后重新获取')):e.hide()),i.attr("name",k.otpInputName),i.attr("id",k.otpInputName),j.attr("for",k.otpInputName),k.otpInputTabIndex&&i.attr("tabindex",k.otpInputTabIndex);var l=function(){e.show(),g.hide(),v||f.hide()},m=function(a){LufaxPopup.popup({popupTitleName:"提示",message:"由于您的动态码获取次数超过限制，您的手机将在"+(a?a.lockHours:"")+"小时内无法获取动态码信息",button:'<a class="btns btn_info confirmBtn" href="javascript:void(0);">确认</a>',iconClass:"minusCircleIcon",onConfirm:function(){n(),o()},onClose:function(){n(),o()}})},n=function(){e.addClass("disabled"),e.prop("disabled",!0)},o=function(){i.prop("disabled",!0),i.val("")},p=function(b,c){var d=a(b).closest(".control-group");d.find(".input-wrap").addClass("error"),"popup"==k.otpScene?(d.find(".otp-error-for-popup").show(),d.find(".otp-error-for-popup").html(c)):(d.find(".errorPanel").css("display","inline-block"),d.find(".errorContent").html(c))},q=function(b){var c=a(b).closest(".control-group");c.find(".input-wrap").removeClass("error"),c.find(".errorPanel").hide(),c.find(".otp-error-for-popup").hide()},r=function(){var b=k.otpRequestUrl,c=k.otpRequestParams;"3"==k.dynamicType&&(b=k.otpVoiceRequestUrl?k.otpVoiceRequestUrl:b,c=k.otpVoiceRequestParams?k.otpVoiceRequestParams:c),a.extend(c,k.otpGetRequestParams()),"GET"==k.otpRequestMethod?a.get(b,c,s):a.post(b,c,s)},s=function(a){"000"===a.retCode?t():"018"===a.retCode?"popup"==k.otpScene?(otp.showErrorMsgForPopup("1",a.retCode,a.retMap),otp.disableOtp(a.retMap)):(otp.showErrorMsg("1",a.retCode,a.retMap),otp.disableOtp(a.retMap)):"021"===a.retCode&&(k.otpDisablePopupError?("popup"==k.otpScene?otp.showErrorMsgForPopup("1",a.retCode,a.retMap):otp.showErrorMsg("1",a.retCode,a.retMap),otp.disableSendOTPBtn(),otp.disableOtpInput()):(m(a.retMap),otp.disableOtp(a.retMap))),"function"==typeof k.otpRequestCallback&&k.otpRequestCallback(a)},t=function(){e.hide(),g.css("display","inline-block"),"2"==k.dynamicType?f.html("动态码已发送至您的手机"+k.otpGetMobileNo()+"，请注意查收"):"3"==k.dynamicType?f.html("您的手机"+k.otpGetMobileNo()+"将在"+k.otpVoiceWaitTime+"内收到<br/><span>"+k.otpOfficialCall+"</span> 的电话，请接听并在120秒内输入"):"1"==k.dynamicType&&("1"==k.otpMobileType?(f.html("动态码已发送至您的手机"+k.otpGetMobileNo()+'，请在120秒内输入，收不到短信请 <a href="javascript:void(0);" id="voiceObtainBtn">语音获取</a>'),a("body").off("click","#voiceObtainBtn"),a("body").on("click","#voiceObtainBtn",u)):f.html("动态码已发送至您的手机"+k.otpGetMobileNo()+"，请在120秒内输入")),f.show(),tool.countDown.options.countDownSeconds>0?tool.countDown.options.countDownSeconds=parseInt(k.otpCountDownSeconds):tool.countDown({countDownSeconds:parseInt(k.otpCountDownSeconds),secondsOnly:!0,callback:l})},u=function(){if(k.otpClick&&k.otpClick()){q(this);var b=k.otpRequestUrl,c=k.otpRequestParams;b=k.otpVoiceRequestUrl?k.otpVoiceRequestUrl:b,c=k.otpVoiceRequestParams?k.otpVoiceRequestParams:c,a.extend(c,k.otpGetRequestParams()),"GET"==k.otpRequestMethod?a.get(b,c,w):a.post(b,c,w)}},v=!1,w=function(a){"000"===a.retCode?(t(),f.html("您的手机"+k.otpGetMobileNo()+"将在"+k.otpVoiceWaitTime+"内收到<span>"+k.otpOfficialCall+"</span>的电话，请接听并在120秒内输入"),v=!0,setTimeout(function(){v=!0,f.hide()},1e4)):"018"===a.retCode?"popup"==k.otpScene?(otp.showErrorMsgForPopup("1",a.retCode,a.retMap),otp.disableOtp(a.retMap)):(otp.showErrorMsg("1",a.retCode,a.retMap),otp.disableOtp(a.retMap)):"021"===a.retCode&&(k.otpDisablePopupError?("popup"==k.otpScene?otp.showErrorMsgForPopup("1",a.retCode,a.retMap):otp.showErrorMsg("1",a.retCode,a.retMap),otp.disableSendOTPBtn(),otp.disableOtpInput()):(m(a.retMap),otp.disableOtp(a.retMap))),"function"==typeof k.otpRequestCallback&&k.otpRequestCallback(a)};a("body").off("click","#obtainBtn"),a("body").on("click","#obtainBtn",function(){k.otpClick&&k.otpClick()&&(r(),q(this))}),a(this).find(".otp-input").blur(function(){var b;b="2"==k.otpType?/^[0-9]{6}$/:/^[0-9]{7}$/;var c=a(this).val().length;0===c?p(this,"请填写"):b.test(a(this).val())?q(this):"2"==k.otpType?p(this,"令牌码为6位数字"):p(this,"动态码为7位数字"),k.otpBlur&&k.otpBlur()}),a(this).find(".otp-input").focus(function(){q(this),k.otpFocus&&k.otpFocus()}),k.otpTrigger===!0&&"2"!=k.otpType&&e.trigger("click"),k.otpTrigger===!1&&1==k.otpTriggerCountDown&&"2"!=k.otpType&&t()})}}(jQuery),function(a){var b;window.otp=b={},b.errorCode={1:{"011":"动态码错误或过期","012":"动态码错误或过期","009":"系统异常","018":"由于您输错:errorTimes次动态码，已被锁定，请等待:lockSeconds秒","010":"由于您输错:errorTimes次动态码，已被锁定，请等待:lockSeconds秒","014":"动态码错误或过期","021":"由于您的动态码获取次数超过限制，您的手机将在:lockHours小时内无法获取动态码信息"},2:{"01":["令牌码错误","令牌码错误，请确认您设备上的手机令牌显示的归属用户名与您的用户名是否一致"],"02":"由于您:period内输错:maxFailCount次动态码，已被锁定，请等待:lockTime","03":"您已关闭手机令牌，请重新开始操作流程"}},b.getValue=function(){var b=a(".otp-input").val();return b},b.showPlainErrorMsg=function(b){var c=a(".otp-group");c.find(".input-wrap").addClass("error"),!b||b.length<=0||(c.find(".errorPanel").css("display","inline-block"),c.find(".errorContent").html(b),b.length>20?c.find(".errorPanel").addClass("multipleLine"):c.find(".errorPanel").removeClass("multipleLine"))},b.showPlainErrorMsgForPopup=function(b){var c=a(".otp-group");c.find(".input-wrap").addClass("error"),!b||b.length<=0||(c.find(".otp-error-for-popup").show(),c.find(".otp-error-for-popup").html(b),b.length>20?c.find(".errorPanel").addClass("multipleLine"):c.find(".errorPanel").removeClass("multipleLine"))},b.showErrorMsg=function(c,d,e){var f=a(".otp-group"),g=b.parseErrorCode(c,d,e);f.find(".input-wrap").addClass("error"),!g||g.length<=0||(f.find(".errorPanel").css("display","inline-block"),f.find(".errorContent").html(g),g.length>20?f.find(".errorPanel").addClass("multipleLine"):f.find(".errorPanel").removeClass("multipleLine"))},b.showErrorMsgForPopup=function(c,d,e){var f=a(".otp-group"),g=b.parseErrorCode(c,d,e);f.find(".input-wrap").addClass("error"),!g||g.length<=0||(f.find(".otp-error-for-popup").show(),f.find(".otp-error-for-popup").html(g),g.length>20?f.find(".errorPanel").addClass("multipleLine"):f.find(".errorPanel").removeClass("multipleLine"))},b.clearErrorMsg=function(){var b=a(".otp-group");b.find(".input-wrap").removeClass("error"),b.find(".errorPanel").hide(),b.find(".otp-error-for-popup").hide()},b.formatErrorMsg=function(a,b){var c=[];for(var d in b)a.indexOf(d)>=0&&c.push(d+"="+b[d]);var e=a.replace(/:(\w+)/g,function(a,c){var d=b[c];return d?d:c});return e},b.parseErrorCode=function(a,c,d){var e;if("2"==a)if("01"==c)e=!d.failCount||d.failCount<3?b.errorCode[a][c][0]:b.errorCode[a][c][1];else{if("03"==c)return b.tokenErrorPopup(d),e;"02"==c?(b.disableOtp(d),e=b.errorCode[a][c]):e=b.errorCode[a][c]}else("018"==c||"010"==c)&&b.disableOtp(d),e=b.errorCode[a][c];return e=e?b.formatErrorMsg(e,d):c},b.tokenErrorPopup=function(){LufaxPopup.popup({popupTitleName:"提示",message:"您已关闭手机令牌，请重新开始操作流程",button:'<a class="btns btn_info confirmBtn" href="javascript:void(0);">确认</a>',iconClass:"minusCircleIcon",onConfirm:function(){window.location.reload()},onClose:function(){window.location.reload()}})},b.disableSendOTPBtn=function(){a("#obtainBtn").addClass("disabled"),a("#voiceObtainBtn").addClass("disabled"),a("#obtainBtn").prop("disabled",!0),a("#voiceObtainBtn").prop("disabled",!0),tool.countDown.options.countDownSeconds=0},b.disableOtpInput=function(){a(".otp-input").prop("disabled",!0),a(".otp-input").val(""),a(".otp-group").find(".input-wrap").removeClass("error")},b.enableSendOTPBtn=function(){a("#obtainBtn").removeClass("disabled"),a("#obtainBtn").removeProp("disabled"),a("#voiceObtainBtn").removeClass("disabled"),a("#voiceObtainBtn").removeProp("disabled")},b.enableOtpInput=function(){a(".otp-input").prop("disabled",!1)},b.disableOtp=function(a){var c=a.lockSeconds;b.disableSendOTPBtn(),b.disableOtpInput(),setTimeout(function(){b.enableSendOTPBtn(),b.enableOtpInput(),b.clearErrorMsg()},1e3*c)},b.checkOtp=function(a,c,d){var e;e="2"==a?/^[0-9]{6}$/:/^[0-9]{7}$/;var f=c?c.length:0,g=!1,h="";return 0===f?h="请填写":e.test(c)?(g=!0,b.clearErrorMsg()):h="2"==a?"令牌码为6位数字":"动态码为7位数字",g||("popup"==d?b.showPlainErrorMsgForPopup(h):b.showPlainErrorMsg(h)),g}}(jQuery);