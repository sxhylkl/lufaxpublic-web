window.lufax=window.lufax||{version:"0.1.0"},lufax.util=lufax.util||{},lufax.com=lufax.com||{},lufax.ui=lufax.ui||{},!function(){function a(){}a.prototype={args:{},init:function(){var a=this,b="https://user."+location.hostname.split(".").slice(location.hostname.split(".").length-2).join(".")+"/user/service/user/current-user-info-for-homepage?jsoncallback=?";a._setHeader(),a._showUserInfo(b)},_showUserInfo:function(a){var b=this;$.getJSON(a,function(a){if(a.cookieName=lufax.util.getUnameFromCookie,a.cookieName_tnf=lufax.Cookie.get("_tnf"),b.args=a,a.userName){$("#top-login").removeClass("hidden"),$(".user-name").html(b._limitText(a.userName,12));var c=$(".my-account"),d=a.unreadMsgCount;c.addClass("my-msg-status"),c.find("#msg-count").html(d),0!==d&&$(".icon-msg").addClass("new-msg"),c.find(".msg-wrap").removeClass("hidden")}else a.cookieName?($("#top-cookie").removeClass("hidden"),$(".cookie-name").html(b._limitText(a.cookieName,12))):$("#top-noLog").removeClass("hidden");$("#safe-logout").bind("click",function(){return LufaxPopup.simplePopup({imgClass:"safeExit",title:"您即将安全退出",content:"",button:'<a class="btns btn-large btn-info confirmBtn" href="javascript:void(0);"><span>安全退出</span></a><a class="btns btn-large btn-cancel close" href="javascript:void(0);"><span>取消</span></a>',onConfirm:function(){tool.deleteCookie("_tn"),window.location=$("#safe-logout").attr("href")}}),!1})})},_limitText:function(a,b){var c=a;return a.length>b&&(c=a.slice(0,b)+"..."),c},_setHeader:function(){var a=this,b=$("#current-page").val();switch(b){case"login":a._handleHeader();break;case"recharge":a._handleHeader();break;case"withdraw":a._handleHeader();break;case"investment-detail":a._handleHeader();break;case"my-account":a._handleHeader();break;case"investment":a._handleHeader();break;case"transfer-request":a._handleHeader();break;case"sme":a._handleHeader()}},_handleHeader:function(){$(".head-wrap").addClass("head-wrap-inside"),$(".link-logo").addClass("hidden")}},lufax.header=new a}(this),$(function(){lufax.header.init()}),!function(){function a(){}a.prototype={args:{},init:function(){var a=this,b=top.location.protocol+"//www."+location.hostname.split(".").slice(location.hostname.split(".").length-2).join(".")+"/list/service/product/counts-info?jsoncallback=?";a._locationNav(),a._showNavData(b)},_showNavData:function(a){var b=this,c={newUserProductCounts:"#nav-newUser",totalTransferProductCounts:"#nav-transfer",licaiProductCounts:"#nav-allLicai",piaojuProductCounts:"#nav-piaoju",normalLicaiProductCounts:"#nav-zhuanxinglicai",zhujiangProductCounts:"#nav-zhujiang",anyedaiProductCounts:"#nav-anye",countsOfInvestChannel:"#nav-anyi",fuyingProductCounts:"#nav-fuying",totalCountsOfInvestChannel:"#nav-touzipindao",luWalletProductCounts:"#nav-linghuobao"};$.getJSON(a,function(a){if("false"!==a.result){b.args=a;for(var d in c){var e=a[d];0!=e&&void 0!=e&&(e=e>99?"99+":e,$(c[d]).html(e),$(c[d]).parent("span").show())}}window._set_other_counts&&window._set_other_counts(a)})},_locationNav:function(){var a=$("#current-page").val(),b=$(".lufax-navigator");switch(a){case"nav-home":$("."+a).addClass("selected");break;case"invest":$(".nav-invest").addClass("selected");break;case"licai":$(".nav-licai").addClass("selected");break;case"about":$(".nav-about").addClass("selected");break;case"transfer":$(".nav-transfer").addClass("selected");break;case"xinke":$(".nav-xinke").addClass("selected");break;case"loan":$(".nav-loan-channel").addClass("selected");break;case"login":b.hide();break;case"recharge":b.hide();break;case"withdraw":b.hide();break;case"investment-detail":b.hide();break;case"my-account":b.hide();break;case"investment":b.hide();break;case"transfer-request":b.hide();break;case"sme":b.hide()}}},lufax.navigator=new a}(this),$(function(){lufax.navigator.init()}),$(function(){$(".select-box").click(function(){$(this).find(".select-box-list").fadeIn(),$(this).mouseleave(function(){$(this).find(".select-box-list").fadeOut()})})}),!function(){function a(a){var b=this,c={handler:null,duration:500,pageHeight:400,showHire:!1,showMessage:!0,showHelp:!0,showQuestion:!0,showCalc:!1,relatedEl:null,help_link:"http://www."+location.hostname.split(".").slice(location.hostname.split(".").length-2).join(".")+"/help/help_search.html",link:"http://www."+location.hostname.split(".").slice(location.hostname.split(".").length-2).join(".")+"/survey/big-list/index.html",messageLink:"http://www."+location.hostname.split(".").slice(location.hostname.split(".").length-2).join(".")+"/help/help_service_feedback.html",calcLink:"http://www."+location.hostname.split(".").slice(location.hostname.split(".").length-2).join(".")+"/tools/calculator.html",hireLink:"http://promo."+location.hostname.split(".").slice(location.hostname.split(".").length-2).join(".")+"/activity-pages/job-20150213/index.html"};b.topOptions=$.extend(c,a),b.topOptions.handler&&b.initOldTop(),b.init()}a.prototype.init=function(){var a=this;a._initStructure(),a._initStatus(),a._initEvents()},a.prototype._initStructure=function(){var a=this.topOptions,b='<a href="$"  target="_blank" class="help top-block">';b+='<span class="help-icon-con"><span class="help-icon">&nbsp</span></span>',b+='<span class="text">提问</span>',b+="</a>";var c='<a href="$"  target="_blank" class="qustionnaire top-block">';c+='<span class="qustionnaire-icon-con"><span class="quest-icon">&nbsp</span></span>',c+='<span class="text">问卷</span>',c+="</a>";var d='<a href="$"  target="_blank" class="message top-block">';d+='<span class="message-icon-con"><span class="message-icon">&nbsp</span></span>',d+='<span class="text">反馈</span>',d+="</a>";var e='<div class="top">';e+='<div class="top-icon-con"><span class="top-icon">&nbsp</span></div>',e+='<span class="text">顶部</span>',e+="</div>";var f='<a href="$"  target="_blank" class="calc top-block">';f+='<span class="calc-icon"></span>',f+="</a>";var g='<a href="$"  target="_blank" class="hire top-block">';g+='<div class="hire-icon-con"><span class="hire-icon">&nbsp</span></div>',g+='<span class="text">招聘</span>',g+="</a>";var h='<div class="top-question-container">';a.showCalc&&(h+=f),a.showHelp&&(h+=b),a.showHire&&(h+=g),a.showQuestion&&(h+=c),a.showMessage&&(h+=d),h+=e,h+="</div>",$("body").append(h)},a.prototype._initStatus=function(){var a=this.topOptions;$(".top-question-container .help").attr("href",a.help_link),$(".top-question-container .qustionnaire").attr("href",a.link),$(".top-question-container .message").attr("href",a.messageLink),$(".top-question-container .calc").attr("href",a.calcLink),$(".top-question-container .hire").attr("href",a.hireLink),$(window).scrollTop()>a.pageHeight&&$(".top-question-container .top").fadeIn("slow");var b=0;a.showMessage&&(b+=$(".top-question-container .message").outerHeight(!0)),a.showHelp&&(b+=$(".top-question-container .help").outerHeight(!0)),a.showQuestion&&(b+=$(".top-question-container .qustionnaire").outerHeight(!0)),a.showCalc&&(b+=$(".top-question-container .calc").outerHeight(!0)),a.showHire&&(b+=$(".top-question-container .hire").outerHeight(!0)),b+=$(".top-question-container .top").outerHeight(!0),$(".top-question-container").css("height",b+"px")},a.prototype._initEvents=function(){var a=this.topOptions;$(".top-question-container .top").on("click",function(){$(this).click(function(){$("html,body").stop(!0,!0)}),$("html,body").animate({scrollTop:0},a.duration)}),$(".top-question-container .top").hover(function(){$(this).addClass("hover"),$(".top-question-container .top-icon").addClass("top-icon-hover")},function(){$(this).removeClass("hover"),$(".top-question-container .top-icon").removeClass("top-icon-hover")}),$(".top-question-container .help").hover(function(){$(this).addClass("hover"),$(".top-question-container .help-icon").addClass("help-icon-hover")},function(){$(this).removeClass("hover"),$(".top-question-container .help-icon").removeClass("help-icon-hover")}),$(".top-question-container .qustionnaire").hover(function(){$(this).addClass("hover"),$(".top-question-container .quest-icon").addClass("quest-icon-hover")},function(){$(this).removeClass("hover"),$(".top-question-container .quest-icon").removeClass("quest-icon-hover")}),$(".top-question-container .message").hover(function(){$(this).addClass("hover"),$(".top-question-container .message-icon").addClass("message-icon-hover")},function(){$(this).removeClass("hover"),$(".top-question-container .message-icon").removeClass("message-icon-hover")}),$(".top-question-container .hire").hover(function(){$(this).addClass("hover"),$(".top-question-container .hire-icon").addClass("hire-icon-hover")},function(){$(this).removeClass("hover"),$(".top-question-container .hire-icon").removeClass("hire-icon-hover")}),$(".top-question-container .calc").hover(function(){$(this).addClass("hover"),$(".top-question-container .calc-icon").addClass("calc-icon-hover"),$(".calc-icon").html("收益<br>计算器")},function(){$(this).removeClass("hover"),$(".top-question-container .calc-icon").removeClass("calc-icon-hover"),$(".calc-icon").html("")}),$(window).scroll(function(){$(window).scrollTop()>a.pageHeight?$(".top-question-container .top").fadeIn("slow"):$(".top-question-container .top").fadeOut("slow")})},a.prototype.setPosition=function(){var a=this.topOptions.relatedEl;if(a){"string"==typeof a&&(a=$(a));var b=a.offset(),c=(b.left,a.outerWidth()),d=($(window).width()-c)/2,e=0,f=$(".top-question-container").outerWidth();e=d>80?d-40-f:10,$(".top-question-container").css("right",e)}},a.prototype.initOldTop=function(){function a(a){var b=0;b=topOptions.border?$(a).parent().outerWidth()-1:$(a).parent().outerWidth(),$(a).parent().attr("style","position:relative;"),$(a).attr("style","margin-left:"+b+"px;"),$(window).scrollTop()>300&&$(a).stop(!0,!0).show()}var b=this,c=this.topOptions.handler;return c.each(function(){$(window).scroll(function(){a(c)}),$(this).on("click",function(){$("html,body").animate({scrollTop:0},b.topOptions.duration)})})},lufax.ui.GoTop=a}();